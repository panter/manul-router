{"version":3,"sources":["../src/disable_flowrouter_click_detection.js"],"names":["FlowRouter","Meteor","wait","_linkDetectionDisabled","Package","startup","initialize","page","link","oldPage","_page","args","click","call"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA;;kBAEe,gBAA4B;AAAA,MAAzBA,UAAyB,QAAzBA,UAAyB;AAAA,MAAbC,MAAa,QAAbA,MAAa;;AACzCD,aAAWE,IAAX;AACAF,aAAWG,sBAAX,GAAoC,IAApC;AACA;;AAEA,MAAIC,QAAQ,0BAAR,CAAJ,EAAyC;AACvC;AACAH,WAAOI,OAAP,CAAe,YAAM;AACnBL,iBAAWM,UAAX,CAAsB;AACpBC,cAAM;AACJC,gBAAM;AADF;AADc,OAAtB;AAKD,KAND;AAOD,GATD,MASO;AACL;AACA;AACAP,WAAOI,OAAP,CAAe,YAAM;AACnB,UAAMI,UAAUT,WAAWU,KAA3B;AACAV,iBAAWU,KAAX,GAAmB,SAASA,KAAT,GAAwB;AAAA,0CAANC,IAAM;AAANA,cAAM;AAAA;;AACzC,YAAI,wBAASA,KAAK,CAAL,CAAT,CAAJ,EAAuB;AACrBA,eAAK,CAAL,EAAQC,KAAR,GAAgB,KAAhB;AACD;AACD,eAAOH,QAAQI,IAAR,iBAAa,IAAb,SAAsBF,IAAtB,EAAP;AACD,OALD;AAMA,4BAAOX,WAAWU,KAAlB,EAAyBD,OAAzB,EARmB,CAQgB;;AAEnCT,iBAAWM,UAAX;AACD,KAXD;AAYD;AACF,C","file":"disable_flowrouter_click_detection.js","sourcesContent":["import assign from 'lodash/assign';\nimport isObject from 'lodash/isObject';\n\n/* eslint no-param-reassign: 0*/\n\nexport default ({ FlowRouter, Meteor }) => {\n  FlowRouter.wait();\n  FlowRouter._linkDetectionDisabled = true;\n  /* global Package*/\n\n  if (Package['ostrio:flow-router-extra']) {\n    // probably the \"new\" flow router\n    Meteor.startup(() => {\n      FlowRouter.initialize({\n        page: {\n          link: false,\n        },\n      });\n    });\n  } else {\n    // patch FlowRouter\n    // because of https://github.com/kadirahq/flow-router/issues/705\n    Meteor.startup(() => {\n      const oldPage = FlowRouter._page;\n      FlowRouter._page = function _page(...args) {\n        if (isObject(args[0])) {\n          args[0].click = false;\n        }\n        return oldPage.call(this, ...args);\n      };\n      assign(FlowRouter._page, oldPage); // copy properties\n\n      FlowRouter.initialize();\n    });\n  }\n};\n"]}